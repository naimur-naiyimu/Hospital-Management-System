{% extends 'base.html' %}
{% block title %}Dr. {{ doctor.full_name }} Details{% endblock %}
{% block content %}
  <div class="container mt-4">
    <div class="row">
      <div class="col-md-6 order-md-2"> <!-- Set order-md to 1 for the photo column -->
        {% if doctor.photo %}
          <img src="{{ doctor.photo.url }}" class="card-img-top" alt="{{ doctor.full_name }}" width="400" height="300">
        {% else %}
          <div class="text-center py-3">
            <i class="fas fa-user-circle fa-4x text-secondary"></i>
          </div>
        {% endif %}
      </div>
      <div class="col-md-6 order-md-1"> 
        <div class="card-body" style="font-size: 18px; line-height: 0.5; font-family:  sans-serif"> 
          <h1 class="card-title" style="font-size: 32px; line-height: 1.5;">Dr. {{ doctor.full_name }}</h1>
          <p class="card-text">Specialization: {{ doctor.specialization }}</p>
          <p class="card-text">Gender: {{ doctor.get_gender_display }}</p>
          <p class="card-text">Date of Birth: {{ doctor.date_of_birth }}</p>
          <p class="card-text">Blood Group: {{ doctor.blood_group }}</p>
          <p class="card-text">Contact: {{ doctor.contact_number }}</p>
          <p class="card-text">Address: {{ doctor.address }}</p>
          <p class="card-text">Salary: {{ doctor.salary }}</p>
          {% if doctor.fees %}
            <p class="card-text">Fees: {{ doctor.fees }}</p>
          {% endif %}
          <!-- <a href="{% url 'staff:doctor-update' doctor.pk %}" class="btn btn-warning">Edit</a> -->
          <!-- <a href="{% url 'staff:doctor-delete' doctor.pk %}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this doctor?')">Delete</a> -->
        </div>
        <!-- <a href="{% url 'staff:doctor-list' %}">Back to Doctor List</a> -->
      </div>
      </div>

      {% if user.user_type == 0  or user.user_type == 1 %}
      <!-- Display  appointments -->
      <h2>Appointments</h2>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>#</th>
            <th>Patient</th>
            <th>Appointment Date</th>
            <th>Purpose</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for appointment in appointments %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ appointment.patient.full_name }}</td>
              <td>{{ appointment.appointment_date }}</td>
              <td>{{ appointment.symptoms }}</td>
              <td>{{ appointment.get_status_display }}</td>
              <td>
                <a href="{% url 'administrations:appointment-detail' appointment.pk %}" class="btn btn-sm btn-primary">View Details</a>
                <a href="{% url 'administrations:appointment-update' appointment.pk %}" class="btn btn-sm btn-warning">Edit</a>
                <!-- <a href="{% url 'administrations:appointment-delete' appointment.pk %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this appointment?')">Delete</a> -->
              </td>
            </tr>
            {% empty %}
              <tr>
                <td colspan="5">No appointment available.</td>
              </tr>
            {% endfor %}
        </tbody>
      </table>
      <!-- Display patient's prescriptions -->
     <h2>Prescriptions</h2>
     <table class="table">
     <thead>
       <tr>
         <th scope="col">#</th>
         <th scope="col">Patient</th>
         <th scope="col">Issue Date</th>
         <th scope="col">Next Appointment Date</th>
         <th scope="col">Actions</th>
       </tr>
     </thead>
     <tbody>
       {% for prescription in prescriptions %}
         <tr>
           <th scope="row">{{ forloop.counter }}</th>
           <td>{{ prescription.patient }}</td>
           <td>{{ prescription.issue_date }}</td>
           <td>{{ prescription.next_appointment_date }}</td>
           <td>
             <a href="{% url 'administrations:prescription-detail' prescription_id=prescription.id %}" class="btn btn-sm btn-primary">View Details</a>
             <a href="{% url 'administrations:edit-prescription' prescription_id=prescription.id %}" class="btn btn-sm btn-warning">Edit</a>
             <!-- <a href="{% url 'administrations:delete-prescription' prescription_id=prescription.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this appointment?')">Delete</a> -->
           </td>
         </tr>
       {% empty %}
         <tr>
           <td colspan="6">No prescriptions available.</td>
         </tr>
       {% endfor %}
     </tbody>
   </table>
   {% endif %}
  </div>
{% endblock %}
